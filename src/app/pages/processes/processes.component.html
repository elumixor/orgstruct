<div class="app-bg"></div>

<div class="app-centered">
    <h1 class="light white">Processes</h1>


    @for (process of processes(); track $index) {
    <app-with-context>
        <app-with-icon class="process white pointer mb-10"
                       icon="process.svg"
                       size="10px"
                       (click)="selectProcess(process)">
            <div class="h3 weight-normal m-0">{{process.title}}</div>
            @if (process.description) { <p class="m-0">{{process.description}}</p> }
        </app-with-icon>

        <app-context-option (action)="removeProcess(process)">
            <app-with-icon class="block button inline-block white bg-danger"
                           icon="remove.svg"
                           size="0.6em">
                Remove
            </app-with-icon>
        </app-context-option>
    </app-with-context>
    }

    <app-with-icon class="block button inline-block white"
                   icon="add.svg"
                   size="10px"
                   (appClick)="addProcess()">
        Add process
    </app-with-icon>

</div>

<!-- <app-processes-viewer /> -->

@if (selectedProcess) {
<app-process-editor [process]="selectedProcess"
                    [path]="currentPath"
                    (closed)="selectedProcess = undefined"
                    (processSelected)="selectedProcess = $event"
                    (taskSelected)="selectedTask = $event" />
}

@if (selectedTask) {
<app-task-editor [task]="selectedTask"
                 [parentProcess]="selectedProcess!"
                 (closed)="selectedTask = undefined" />
}